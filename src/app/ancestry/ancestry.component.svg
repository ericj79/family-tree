<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 90 90" width="100%">
  <defs>
    <g id="grandToGreat">
      <polyline class="lines"
        attr.points="{{chart.greatGrandparents.people[0].x}},{{chart.greatGrandparents.y}} {{chart.greatGrandparents.people[0].x}},{{(chart.greatGrandparents.y+chart.grandparents.y)/2}} {{chart.greatGrandparents.people[1].x}},{{(chart.greatGrandparents.y+chart.grandparents.y)/2}} {{chart.greatGrandparents.people[1].x}},{{chart.greatGrandparents.y}}" />
      <line class="lines" [attr.x1]="chart.grandparents.people[0].x" [attr.x2]="chart.grandparents.people[0].x"
        [attr.y1]="(chart.greatGrandparents.y+chart.grandparents.y)/2" [attr.y2]="chart.grandparents.y" />
    </g>
    <g id="parentToGrand">
      <polyline class="lines"
        attr.points="{{chart.grandparents.people[0].x}},{{chart.grandparents.y}} {{chart.grandparents.people[0].x}},{{(chart.parents.y+chart.grandparents.y)/2}} {{chart.grandparents.people[1].x}},{{(chart.parents.y+chart.grandparents.y)/2}} {{chart.grandparents.people[1].x}},{{chart.grandparents.y}}" />
      <line class="lines" [attr.x1]="chart.parents.people[0].x" [attr.x2]="chart.parents.people[0].x"
        [attr.y1]="(chart.parents.y+chart.grandparents.y)/2" [attr.y2]="chart.parents.y" />
    </g>
  </defs>
  <g id="lines">
    <g id="grandToGreatLines">
      <use xlink:href="#grandToGreat" />
      <use xlink:href="#grandToGreat"
        [attr.x]="chart.greatGrandparents.people[2].x-chart.greatGrandparents.people[0].x" />
      <use xlink:href="#grandToGreat"
        [attr.x]="chart.greatGrandparents.people[4].x-chart.greatGrandparents.people[0].x" />
      <use xlink:href="#grandToGreat"
        [attr.x]="chart.greatGrandparents.people[6].x-chart.greatGrandparents.people[0].x" />
    </g>
    <g id="parentToGrandLines">
      <use xlink:href="#parentToGrand" />
      <use xlink:href="#parentToGrand" [attr.x]="chart.grandparents.people[2].x-chart.grandparents.people[0].x" />
    </g>
    <g id="selfToParent">
      <polyline class="lines"
        attr.points="{{chart.parents.people[0].x}},{{chart.parents.y}} {{chart.parents.people[0].x}},{{(chart.parents.y+chart.self.y)/2}} {{chart.parents.people[1].x}},{{(chart.parents.y+chart.self.y)/2}} {{chart.parents.people[1].x}},{{chart.parents.y}}" />
      <line class="lines" [attr.x1]="chart.self.x" [attr.x2]="chart.self.x" [attr.y1]="(chart.parents.y+chart.self.y)/2"
        [attr.y2]="chart.self.y" />
    </g>
  </g>
  <g id="people">
    <g *ngFor="let person of chart.greatGrandparents.people">
      <g app-person [size]="size" [xPos]="person.x" [yPos]="chart.greatGrandparents.y" [gender]="person.gender"
        level="grand">
      </g>
      <text [attr.x]="person.x - size/2" [attr.y]="chart.greatGrandparents.y - size -1">
        {{person.count}}
      </text>
    </g>

    <g *ngFor="let person of chart.grandparents.people">
      <g app-person [size]="size" [xPos]="person.x" [yPos]="chart.grandparents.y" [gender]="person.gender"
        level="grand">
      </g>
      <text [attr.x]="person.x + size + 1" [attr.y]="chart.grandparents.y + size/2">
        {{person.count}}
      </text>
    </g>

    <g *ngFor="let person of chart.parents.people">
      <g app-person [size]="size" [xPos]="person.x" [yPos]="chart.parents.y" [gender]="person.gender" level="parent">
      </g>
      <text [attr.x]="person.x + size + 1" [attr.y]="chart.parents.y + size/2">
        {{person.count}}
      </text>
    </g>

    <g app-person [size]="size" [xPos]="chart.self.x" [yPos]="chart.self.y" [gender]="chart.self.gender"
      checked="chart.self.checked" level="self"></g>
    <text [attr.x]="chart.self.x + size + 1" [attr.y]="chart.self.y + size/2">
      {{chart.self.count}}
    </text>
  </g>
</svg>
